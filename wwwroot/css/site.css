/* /wwwroot/css/site.css - Adapted for Bulma */

/* Global Resets & Base Styles */
html {
    font-size: 16px; 
    position: relative;
    min-height: 100%;
}

body {
    margin-bottom: 60px; 
    transition: background-color 0.3s ease, color 0.3s ease;
    background-color: var(--bulma-body-background-color);
    color: var(--bulma-body-color);
}

/* --- (Light Theme - Default) --- */
:root {
    --sidebar-bg: #f5f5f5; /* Bulma's $white-ter / var(--bulma-white-ter) equivalent */
    --sidebar-link-color: #4a4a4a; /* Bulma's $grey-darker / var(--bulma-grey-darker) */
    --sidebar-link-hover-bg: #e8e8e8;
    --sidebar-link-active-color: var(--bulma-primary);
    --sidebar-link-active-bg: var(--bulma-primary-light);
    --sidebar-border-color: #dbdbdb; /* Bulma's $grey-lighter / var(--bulma-grey-lighter) */

    --bulma-radius:3px; /* Default Bulma border radius */
    --bulma-radius-small: 2px;
    --bulma-radius-large: 7px;

    --top-navbar-bg: var(--sidebar-bg);
    --top-navbar-border-color: var(--sidebar-border-color);

    --content-area-bg: var(--bulma-background);

    --footer-bg: var(--sidebar-bg);
    --footer-border-color: var(--sidebar-border-color);
    --footer-text-color: var(--bulma-text-light);

    --custom-card-bg: var(--bulma-card-background-color);
    --custom-card-header-bg: transparent; /* Bulma card headers are often transparent */
    --custom-card-border-color: var(--bulma-card-shadow-color, hsla(0, 0%, 0%, 0.1)); /* Using shadow color for border idea*/

    --kpi-card-value-color: var(--bulma-link); /* Or var(--bulma-primary) */

    --box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
}

/* --- Dark Theme Overrides --- */
html[data-theme="dark"] {
    --bulma-body-background-color: #1f1f1f; /* Darker background */
    --bulma-body-color: #f0f0f0; /* Lighter text */
    --bulma-link: #48a2e8; /* Lighter blue for links */
    --bulma-link-hover: #75bcf0;
    --bulma-primary: hsl(200, 71%, 65%); /* Adjust primary for dark */
    --bulma-primary-light: hsl(200, 71%, 55%);
    --bulma-primary-dark: hsl(200, 71%, 75%);
    --bulma-text: #e0e0e0;
    --bulma-text-light: #b3b3b3;
    --bulma-text-strong: #ffffff;
    --bulma-border: #444444;
    --bulma-border-hover: #666666;
    --bulma-background: #2a2a2a; /* Background for content area */

    /* Bulma component variable overrides for dark theme */
    --bulma-card-background-color: #2c2c2c;
    --bulma-card-header-color: var(--bulma-text-strong);
    --bulma-card-shadow-color: hsla(0, 0%, 0%, 0.3);
    --bulma-table-background-color: #2c2c2c;
    --bulma-table-color: var(--bulma-text);
    --bulma-table-row-hover-background-color: #333333;
    --bulma-table-striped-background-color: #303030;
    --bulma-input-background-color: #383838;
    --bulma-input-color: var(--bulma-text);
    --bulma-input-border-color: #555555;
    --bulma-input-placeholder-color: #888888;
    --bulma-button-background-color: #444;
    --bulma-button-color: var(--bulma-text-strong);
    --bulma-button-border-color: #555;
    --bulma-button-static-color: var(--bulma-text);
    --bulma-primary-invert: var(--sidebar-bg); /* Text color on primary buttons */


    /* Custom variables for dark theme */
    --sidebar-bg: #252525;
    --sidebar-link-color: var(--bulma-text);
    --sidebar-link-hover-bg: #333333;
    --sidebar-link-active-color: var(--bulma-primary);
    --sidebar-link-active-bg: #3a3a3a;
    --sidebar-border-color: var(--bulma-border);

    --top-navbar-bg: #252525;
    --top-navbar-border-color: var(--bulma-border);

    --content-area-bg: var(--bulma-background);

    --footer-bg: #252525;
    --footer-border-color: var(--bulma-border);
    --footer-text-color: var(--bulma-text-light);

    --custom-card-bg: var(--bulma-card-background-color);
    --custom-card-header-bg: #2c2c2c; /* Slightly darker card headers */
    --custom-card-border-color: var(--bulma-border);

    --kpi-card-value-color: var(--bulma-link);

    --box-shadow: 0 0.125rem 0.25rem rgba(255, 255, 255, 0.05);
}


/* Layout specific styles */
.main-wrapper {
    display: flex;
    flex-grow: 1;
    /* If using Bulma columns for main layout, this might change */
}

.sidebar {
    width: 250px;
    min-height: 100vh; /* Fallback if not using 'vh-100' or similar Bulma helper */
    background-color: var(--sidebar-bg);
    padding-top: 1rem;
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    z-index: 1000;
    transition: width 0.3s ease;
    border-right: 1px solid var(--sidebar-border-color);
    box-shadow: var(--box-shadow);
    display: flex;
    flex-direction: column;
}

.sidebar .navbar-brand {
    padding: 1rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold; /* Bulma uses .is-size-X for sizing */
    font-size: 1.25rem; /* Example size */
    color: var(--sidebar-link-color);
}

/* Adapting .nav-link for Bulma's menu-list structure */
.sidebar .menu-list a { /* Bulma uses <aside class="menu"> <ul class="menu-list"> <li><a>...</a></li> */
    color: var(--sidebar-link-color);
    border-radius: 0; 
    padding: 0.85rem 1.25rem;
    border-left: 3px solid transparent;
    transition: background-color 0.2s ease, color 0.2s ease, border-left-color 0.2s ease;
}
.sidebar .menu-list a:hover {
    background-color: var(--sidebar-link-hover-bg);
    color: var(--sidebar-link-active-color); /* Using active color for hover distinction */
    border-left-color: var(--sidebar-link-active-color);
}
.sidebar .menu-list a.is-active { /* Bulma's active class for menu links */
    background-color: var(--sidebar-link-active-bg);
    color: var(--sidebar-link-active-color);
    font-weight: bold;
    border-left-color: var(--sidebar-link-active-color);
}
.sidebar .menu-list a i {
    width: 20px;
    text-align: center;
    margin-right: 0.5rem;
}


.content-area {
    margin-left: 250px;
    padding: 1.5rem; /* Bulma uses 'rem' extensively. 'p-5' or 'p-6' could be Bulma classes too */
    flex-grow: 1;
    width: calc(100% - 250px);
    background-color: var(--content-area-bg);
    transition: margin-left 0.3s ease, width 0.3s ease;
    overflow-y: auto; /* Allow content to scroll if it overflows */
}


.top-navbar {
    margin-left: 250px;
    width: calc(100% - 250px);
    z-index: 999; /* Below sidebar but above content for stickiness */
    transition: margin-left 0.3s ease, width 0.3s ease;
    position: sticky;
    top: 0;
    background-color: var(--top-navbar-bg);
    border-bottom: 1px solid var(--top-navbar-border-color);
    box-shadow: var(--box-shadow);
    min-height: 60px;
    display: flex;
    align-items: center;
    padding: 0 1rem; 
}

.footer {
    margin-left: 250px;
    width: calc(100% - 250px);
    background-color: var(--footer-bg);
    border-top: 1px solid var(--footer-border-color);
    color: var(--footer-text-color);
    padding: 1rem 1.5rem;
    transition: margin-left 0.3s ease, width 0.3s ease;
    font-size: 0.875rem; 
    text-align: center;
}
.footer a {
    color: var(--bulma-link);
}
.footer a:hover {
    color: var(--bulma-link-hover);
}

/* Sidebar collapsed styles */
.sidebar.collapsed {
    width: 60px;
}
.sidebar.collapsed .navbar-brand span,
.sidebar.collapsed .menu-label, 
.sidebar.collapsed .menu-list a span { 
    display: none;
}
.sidebar.collapsed .menu-list a i {
    margin-right: 0;
}
.sidebar.collapsed .menu-list a {
    padding: 0.85rem 0;
    text-align: center;
}
.sidebar.collapsed .navbar-brand {
    padding-left: 0;
    padding-right: 0;
}
.sidebar.collapsed .navbar-brand::before {
    content: "MA";
    font-size: 1.5rem;
    color: var(--bulma-primary);
    display: block;
    width: 100%;
    text-align: center;
}

.content-area.collapsed,
.top-navbar.collapsed,
.footer.collapsed {
    margin-left: 60px;
    width: calc(100% - 60px);
}


/* Toggle Buttons */
#sidebarToggle, #themeToggle {
    /* Using Bulma button classes in HTML is preferred: <button class="button is-primary" id="themeToggle"> */
    /* If not using Bulma button classes, style them: */
    background: none;
    border: 1px solid var(--bulma-border);
    color: var(--bulma-text);
    font-size: 1.25rem;
    cursor: pointer;
    padding: 0.5rem 0.75rem; 
    border-radius: var(--bulma-radius); 
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
    margin-left: 0.5rem;
}
#sidebarToggle:hover, #themeToggle:hover {
    background-color: var(--bulma-background);
    border-color: var(--bulma-border-hover);
    color: var(--bulma-link-hover);
}
#themeToggle i {
    font-size: 1rem; 
}


/* Component Theming */

/* Cards (Use <div class="card"> ... </div> in HTML) */
.card {
    background-color: var(--custom-card-bg);
}
.card .card-header-title { /* For Bulma card headers */
    font-weight: bold;
    background-color: var(--custom-card-header-bg); 
}

/* Tables (Use <table class="table is-striped is-hoverable is-fullwidth"> ... </table>) */

/* Forms (Use Bulma's form classes: .label, .input, .select, .button, .field, .control) */
.filters-container .field { /* Example for filter grouping */
    margin-bottom: 0.75rem; /* Default Bulma field margin */
}

.kpi-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem; /* Bulma uses 'rem' for spacing */
    margin-bottom: 1.5rem;
}

/* KPI cards */
.metric-card { /* Assumes <div class="card metric-card"> */
}
.metric-card .card-content .title { /* Bulma's .title class for card titles */
    margin-bottom: 0.5rem !important; /* Override Bulma's larger title margin if needed */
    font-size: 1.1rem;
}
.metric-card .card-content .subtitle.is-1, /* Using a large subtitle for value */
.metric-card-value {
    font-size: 2rem;
    font-weight: bold;
    color: var(--kpi-card-value-color);
    line-height: 1.1;
    margin-bottom: 0.25rem;
}
.metric-card .card-content .content p, /* For description */
.metric-card-description {
    font-size: 0.875rem; 
    color: var(--bulma-text-light);
}

.chart-container {
    /* Could be a Bulma 'box' or 'card' */
    padding: 1.5rem;
    background-color: var(--custom-card-bg); /* Uses card background */
    border-radius: var(--bulma-radius-large); /* Or var(--bulma-card-radius) */
    margin-bottom: 1.5rem;
    box-shadow: var(var(--box-shadow)); /* Use Bulma's card shadow or fallback */
}
.chart-container .title { /* For chart titles */
    margin-top: 0;
    margin-bottom: 1rem;
}


/* Responsive adjustments */
@media screen and (max-width: 768px) { /* Bulma's mobile breakpoint */
    .sidebar {
        width: 0;
        padding-top: 0;
        overflow: hidden;
        border-right: none; /* Hide border when fully collapsed */
    }
    .sidebar.is-active-mobile { 
        width: 250px;
        border-right: 1px solid var(--sidebar-border-color);
    }

    .content-area.collapsed-sidebar, /* Add class when sidebar is collapsed */
    .top-navbar.collapsed-sidebar,
    .footer.collapsed-sidebar {
        margin-left: 60px; /* Width of collapsed sidebar */
        width: calc(100% - 60px);
    }

    .content-area,
    .top-navbar,
    .footer {
        margin-left: 0; /* Full width when sidebar is hidden on mobile (not .is-active-mobile) */
        width: 100%;
    }

    .top-navbar .navbar-burger { /* Bulma's burger icon for mobile nav toggle if you use it */
        display: block; 
    }
    .sidebarToggle.is-hidden-desktop { 
        display: block !important;
    }
}

/* Custom Scrollbars */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}
::-webkit-scrollbar-track {
    background: var(--bulma-background);
}
::-webkit-scrollbar-thumb {
    background: var(--bulma-text-light);
    border-radius: var(--bulma-radius-small);
}
::-webkit-scrollbar-thumb:hover {
    background: var(--bulma-text);
}